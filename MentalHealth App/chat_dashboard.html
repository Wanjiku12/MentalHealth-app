<!DOCTYPE html>
<html lang="en" id="patient-panel">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Chat Panel - Tulia</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap');
        * {
           margin: 0;
           padding: 0;
           box-sizing: border-box;
           font-family: "Poppins" , sans-serif;
        }

        body {
            font-family: 'Playfair Display', serif;
            background: linear-gradient(to bottom, #ff69b4, #c71585);
            color: white;
            margin: 0;
            padding: 0;
        }
        .navbar{
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background: white;
            padding: 15px 30px;
            width: 100%;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .navbar h1{
            color: #ff2d92;
            margin-right: 50px;
        }
        .nav-links a{
            margin-left: 20px;
            text-decoration: none;
            color: #333;
            font-weight: bold;
        } 

        main {
            max-width: 1000px;
            margin: 40px auto;
            padding: 0 20px;
        }

        section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }

        h2 {
            margin-top: 0;
            color: #fff;
        }

        /* Journal Section */
        textarea {
            width: 100%;
            height: 120px;
            padding: 10px;
            font-family: 'Playfair Display', serif;
            font-size: 16px;
            border-radius: 5px;
            border: none;
            resize: vertical;
        }

        button {
            background: #ff69b4;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 10px;
        }

        button:hover {
            background: #c71585;
        }

        /* Mood Tracker */
        .mood-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .mood-buttons button {
            flex: 1;
            padding: 10px;
            font-size: 16px;
        }

        .selected-mood {
            margin-top: 10px;
            font-weight: bold;
        }

        /* Therapy Section */
        .therapy-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        input[type="datetime-local"] {
            padding: 8px;
            font-size: 16px;
            border-radius: 5px;
            border: none;
        }

        .session-link {
            color: #fff;
            text-decoration: underline;
            margin-top: 10px;
        }

        /* Language Selector */
        select#languageSelector {
            padding: 8px;
            font-size: 16px;
            border-radius: 5px;
            border: none;
        }

        footer {
            text-align: center;
            padding: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
        }
    </style>
</head>

<body>
       <div class="navbar">
         <h1>Tulia</h1>
           <div class="nav-links">
             <a href="index.html">Home</a>
             <a href="about.html">About Us</a>
             <a href="journal.html">My Journal</a>
             <a href="moodtracker.html">Mood Tracker</a>
             <a href="therapist.html">Therapy Connect</a>
             <a href="contactpage.html">Contact Us</a>
           </div>
       </div>
    <main>
        <!-- Chat -->
        <section id="chat-section">
            <h2>üìù Chat</h2>
            <div id="chat-window" style="height: 300px; overflow-y: auto; background: rgba(255,255,255,0.15); border-radius: 8px; padding: 10px; margin-bottom: 10px;">
                <!-- Chat bubbles will appear here -->
            </div>
            <div style="display: flex; gap: 10px;">
                <input id="chatInput" type="text" placeholder="Type your message..." style="flex: 1; padding: 10px; border-radius: 5px; border: none; font-size: 16px;">
                <button onclick="sendChatMessage()">Send</button>
            </div>
        </section>

        <!-- Language Selection -->
        <section>
            <h2>üåç Change App Language</h2>
            <select id="languageSelector" onchange="changeLanguage()">
                <option value="en">English</option>
                <option value="es">Espa√±ol</option>
                <option value="fr">Fran√ßais</option>
                <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
            </select>
            <p id="languageStatus" style="margin-top: 10px;"></p>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p>&copy; 2025 Tulia. All rights reserved.</p>
    </footer>

    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
    <script>
        // Connect to Socket.IO server
        const socket = io('http://localhost:3000');

        const chatWindow = document.getElementById('chat-window');
        const chatInput = document.getElementById('chatInput');

        // Send message
        function sendChatMessage() {
            const msg = chatInput.value.trim();
            if (msg) {
                addChatBubble(msg, 'me');
                socket.emit('chat message', msg);
                chatInput.value = '';
            }
        }

        // Receive message
        socket.on('chat message', function(msg) {
            addChatBubble(msg, 'other');
        });

        // Add chat bubble to UI
        function addChatBubble(message, sender) {
            const bubble = document.createElement('div');
            bubble.textContent = message;
            bubble.style.maxWidth = '70%';
            bubble.style.margin = '8px 0';
            bubble.style.padding = '10px 15px';
            bubble.style.borderRadius = '18px';
            bubble.style.wordBreak = 'break-word';
            bubble.style.background = sender === 'me' ? '#ff69b4' : '#fff';
            bubble.style.color = sender === 'me' ? '#fff' : '#c71585';
            bubble.style.alignSelf = sender === 'me' ? 'flex-end' : 'flex-start';
            bubble.style.boxShadow = '0 2px 6px rgba(0,0,0,0.08)';
            bubble.style.display = 'inline-block';

            const wrapper = document.createElement('div');
            wrapper.style.display = 'flex';
            wrapper.style.justifyContent = sender === 'me' ? 'flex-end' : 'flex-start';
            wrapper.appendChild(bubble);

            chatWindow.appendChild(wrapper);
            chatWindow.scrollTop = chatWindow.scrollHeight;
        }

        // Send message on Enter key
        chatInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') sendChatMessage();
        });

        // Change language
        function changeLanguage() {
            const lang = document.getElementById("languageSelector").value;
            const translations = {
                en: {
                    journal: "Digital Journal",
                    mood: "Mood Tracker",
                    therapy: "Anonymous Therapy Session",
                    language: "Change App Language",
                    statusSaved: "‚úÖ Journal saved!",
                    statusEmpty: "‚ö†Ô∏è Please write something before saving.",
                    moodText: "How are you feeling today?",
                    scheduleBtn: "Schedule Session",
                    cancelBtn: "Cancel Session",
                    langStatus: "Language changed."
                },
                es: {
                    journal: "Diario Digital",
                    mood: "Seguimiento del Estado de √Ånimo",
                    therapy: "Sesi√≥n de Terapia An√≥nima",
                    language: "Cambiar Idioma de la Aplicaci√≥n",
                    statusSaved: "‚úÖ Diario guardado.",
                    statusEmpty: "‚ö†Ô∏è Por favor escribe algo antes de guardar.",
                    moodText: "¬øC√≥mo te sientes hoy?",
                    scheduleBtn: "Programar Sesi√≥n",
                    cancelBtn: "Cancelar Sesi√≥n",
                    langStatus: "Idioma cambiado."
                },
                fr: {
                    journal: "Journal Num√©rique",
                    mood: "Suivi de l'humeur",
                    therapy: "S√©ance de Th√©rapie Anonyme",
                    language: "Changer la langue de l'application",
                    statusSaved: "‚úÖ Journal enregistr√© !",
                    statusEmpty: "‚ö†Ô∏è Veuillez √©crire quelque chose avant d'enregistrer.",
                    moodText: "Comment vous sentez-vous aujourd'hui ?",
                    scheduleBtn: "Planifier une s√©ance",
                    cancelBtn: "Annuler la s√©ance",
                    langStatus: "Langue modifi√©e."
                },
                hi: {
                    journal: "‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§ú‡§∞‡•ç‡§®‡§≤",
                    mood: "‡§Æ‡•Ç‡§° ‡§ü‡•ç‡§∞‡•à‡§ï‡§∞",
                    therapy: "‡§ó‡•Å‡§Æ‡§®‡§æ‡§Æ ‡§™‡§∞‡§æ‡§Æ‡§∞‡•ç‡§∂ ‡§∏‡§§‡•ç‡§∞",
                    language: "‡§ê‡§™ ‡§ï‡•Ä ‡§≠‡§æ‡§∑‡§æ ‡§¨‡§¶‡§≤‡•á‡§Ç",
                    statusSaved: "‚úÖ ‡§ú‡§∞‡•ç‡§®‡§≤ ‡§∏‡§π‡•á‡§ú‡§æ ‡§ó‡§Ø‡§æ!",
                    statusEmpty: "‚ö†Ô∏è ‡§∏‡§π‡•á‡§ú‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§ï‡•Å‡§õ ‡§≤‡§ø‡§ñ‡•á‡§Ç‡•§",
                    moodText: "‡§Ü‡§ú ‡§Ü‡§™ ‡§ï‡•à‡§∏‡§æ ‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§ï‡§∞ ‡§∞‡§π‡•á ‡§π‡•à‡§Ç?",
                    scheduleBtn: "‡§∏‡§§‡•ç‡§∞ ‡§®‡§ø‡§∞‡•ç‡§ß‡§æ‡§∞‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç",
                    cancelBtn: "‡§∏‡§§‡•ç‡§∞ ‡§∞‡§¶‡•ç‡§¶ ‡§ï‡§∞‡•á‡§Ç",
                    langStatus: "‡§≠‡§æ‡§∑‡§æ ‡§¨‡§¶‡§≤ ‡§ó‡§à‡•§"
                }
            };

            document.querySelector("section:nth-child(1) h2").textContent = translations[lang].journal;
            document.querySelector("section:nth-child(2) h2").textContent = translations[lang].mood;
            document.querySelector("section:nth-child(2) p").textContent = translations[lang].moodText;
            document.querySelector("section:nth-child(3) h2").textContent = translations[lang].therapy;
            document.querySelector("section:nth-child(4) h2").textContent = translations[lang].language;
            document.querySelectorAll("button")[0].textContent = translations[lang].statusSaved.split(" ")[1];
            document.querySelectorAll("button")[1].textContent = translations[lang].scheduleBtn;
            document.querySelectorAll("button")[2].textContent = translations[lang].cancelBtn;

            document.getElementById("languageStatus").textContent = translations[lang].langStatus;
        }
    </script>

</body>

</html>